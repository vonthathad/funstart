webpackJsonp([1,4],{1008:function(n,e,t){t(466),t(465),n.exports=t(467)},296:function(n,e){n.exports=function(n){"undefined"!=typeof execScript?execScript(n):eval.call(null,n)}},465:function(n,e,t){t(296)(t(751))},466:function(n,e,t){t(296)(t(752))},467:function(n,e,t){t(296)(t(753))},751:function(n,e){n.exports='function debounce(a,b,c){var d;return function(){var e=this,f=arguments;clearTimeout(d),d=setTimeout(function(){d=null,c||a.apply(e,f)},b),c&&!d&&a.apply(e,f)}}var transparent=!0,transparentDemo=!0,fixedTop=!1,navbar_initialized=!1;$(document).ready(function(){$.material.init(),$(\'[data-toggle="tooltip"], [rel="tooltip"]\').tooltip(),0!=$(".datepicker").length&&$(".datepicker").datepicker({weekStart:1}),0!=$(".navbar-color-on-scroll").length&&$(window).on("scroll",materialKit.checkScrollForTransparentNavbar),$(\'[data-toggle="popover"]\').popover(),$(".carousel").carousel({interval:4e5})}),materialKit={misc:{navbar_menu_visible:0},checkScrollForTransparentNavbar:debounce(function(){$(document).scrollTop()>260?transparent&&(transparent=!1,$(".navbar-color-on-scroll").removeClass("navbar-transparent")):transparent||(transparent=!0,$(".navbar-color-on-scroll").addClass("navbar-transparent"))},17),initSliders:function(){$("#sliderRegular").noUiSlider({start:40,connect:"lower",range:{min:0,max:100}}),$("#sliderDouble").noUiSlider({start:[20,60],connect:!0,range:{min:0,max:100}})}};var big_image;materialKitDemo={checkScrollForParallax:debounce(function(){$(this).scrollTop();oVal=$(window).scrollTop()/3,big_image.css({transform:"translate3d(0,"+oVal+"px,0)","-webkit-transform":"translate3d(0,"+oVal+"px,0)","-ms-transform":"translate3d(0,"+oVal+"px,0)","-o-transform":"translate3d(0,"+oVal+"px,0)"})},6)};'},752:function(n,e){n.exports='!function(t){function o(t){return"undefined"==typeof t.which?!0:"number"==typeof t.which&&t.which>0?!t.ctrlKey&&!t.metaKey&&!t.altKey&&8!=t.which&&9!=t.which&&13!=t.which&&16!=t.which&&17!=t.which&&20!=t.which&&27!=t.which:!1}function i(o){var i=t(o);i.prop("disabled")||i.closest(".form-group").addClass("is-focused")}function n(o){o.closest("label").hover(function(){var o=t(this).find("input");o.prop("disabled")||i(o)},function(){e(t(this).find("input"))})}function e(o){t(o).closest(".form-group").removeClass("is-focused")}t.expr[":"].notmdproc=function(o){return t(o).data("mdproc")?!1:!0},t.material={options:{validate:!0,input:!0,ripples:!0,checkbox:!0,togglebutton:!0,radio:!0,arrive:!0,autofill:!1,withRipples:[".btn:not(.btn-link)",".card-image",".navbar a:not(.withoutripple)",".footer a:not(.withoutripple)",".dropdown-menu a",".nav-tabs a:not(.withoutripple)",".withripple",".pagination li:not(.active):not(.disabled) a:not(.withoutripple)"].join(","),inputElements:"input.form-control, textarea.form-control, select.form-control",checkboxElements:".checkbox > label > input[type=checkbox]",togglebuttonElements:".togglebutton > label > input[type=checkbox]",radioElements:".radio > label > input[type=radio]"},checkbox:function(o){var i=t(o?o:this.options.checkboxElements).filter(":notmdproc").data("mdproc",!0).after("<span class=\'checkbox-material\'><span class=\'check\'></span></span>");n(i)},togglebutton:function(o){var i=t(o?o:this.options.togglebuttonElements).filter(":notmdproc").data("mdproc",!0).after("<span class=\'toggle\'></span>");n(i)},radio:function(o){var i=t(o?o:this.options.radioElements).filter(":notmdproc").data("mdproc",!0).after("<span class=\'circle\'></span><span class=\'check\'></span>");n(i)},input:function(o){t(o?o:this.options.inputElements).filter(":notmdproc").data("mdproc",!0).each(function(){var o=t(this),i=o.closest(".form-group");0===i.length&&(o.wrap("<div class=\'form-group\'></div>"),i=o.closest(".form-group")),o.attr("data-hint")&&(o.after("<p class=\'help-block\'>"+o.attr("data-hint")+"</p>"),o.removeAttr("data-hint"));var n={"input-lg":"form-group-lg","input-sm":"form-group-sm"};if(t.each(n,function(t,n){o.hasClass(t)&&(o.removeClass(t),i.addClass(n))}),o.hasClass("floating-label")){var e=o.attr("placeholder");o.attr("placeholder",null).removeClass("floating-label");var a=o.attr("id"),r="";a&&(r="for=\'"+a+"\'"),i.addClass("label-floating"),o.after("<label "+r+"class=\'control-label\'>"+e+"</label>")}(null===o.val()||"undefined"==o.val()||""===o.val())&&i.addClass("is-empty"),i.append("<span class=\'material-input\'></span>"),i.find("input[type=file]").length>0&&i.addClass("is-fileinput")})},attachInputEventHandlers:function(){var n=this.options.validate;t(document).on("change",".checkbox input[type=checkbox]",function(){t(this).blur()}).on("keydown paste",".form-control",function(i){o(i)&&t(this).closest(".form-group").removeClass("is-empty")}).on("keyup change",".form-control",function(){var o=t(this),i=o.closest(".form-group"),e="undefined"==typeof o[0].checkValidity||o[0].checkValidity();""===o.val()?i.addClass("is-empty"):i.removeClass("is-empty"),n&&(e?i.removeClass("has-error"):i.addClass("has-error"))}).on("focus",".form-control, .form-group.is-fileinput",function(){i(this)}).on("blur",".form-control, .form-group.is-fileinput",function(){e(this)}).on("change",".form-group input",function(){var o=t(this);if("file"!=o.attr("type")){var i=o.closest(".form-group"),n=o.val();n?i.removeClass("is-empty"):i.addClass("is-empty")}}).on("change",".form-group.is-fileinput input[type=\'file\']",function(){var o=t(this),i=o.closest(".form-group"),n="";t.each(this.files,function(t,o){n+=o.name+", "}),n=n.substring(0,n.length-2),n?i.removeClass("is-empty"):i.addClass("is-empty"),i.find("input.form-control[readonly]").val(n)})},ripples:function(o){t(o?o:this.options.withRipples).ripples()},autofill:function(){var o=setInterval(function(){t("input[type!=checkbox]").each(function(){var o=t(this);o.val()&&o.val()!==o.attr("value")&&o.trigger("change")})},100);setTimeout(function(){clearInterval(o)},1e4)},attachAutofillEventHandlers:function(){var o;t(document).on("focus","input",function(){var i=t(this).parents("form").find("input").not("[type=file]");o=setInterval(function(){i.each(function(){var o=t(this);o.val()!==o.attr("value")&&o.trigger("change")})},100)}).on("blur",".form-group input",function(){clearInterval(o)})},init:function(o){this.options=t.extend({},this.options,o);var i=t(document);t.fn.ripples&&this.options.ripples&&this.ripples(),this.options.input&&(this.input(),this.attachInputEventHandlers()),this.options.checkbox&&this.checkbox(),this.options.togglebutton&&this.togglebutton(),this.options.radio&&this.radio(),this.options.autofill&&(this.autofill(),this.attachAutofillEventHandlers()),document.arrive&&this.options.arrive&&(t.fn.ripples&&this.options.ripples&&i.arrive(this.options.withRipples,function(){t.material.ripples(t(this))}),this.options.input&&i.arrive(this.options.inputElements,function(){t.material.input(t(this))}),this.options.checkbox&&i.arrive(this.options.checkboxElements,function(){t.material.checkbox(t(this))}),this.options.radio&&i.arrive(this.options.radioElements,function(){t.material.radio(t(this))}),this.options.togglebutton&&i.arrive(this.options.togglebuttonElements,function(){t.material.togglebutton(t(this))}))}}}(jQuery),function(t,o,i,n){"use strict";function e(o,i){r=this,this.element=t(o),this.options=t.extend({},s,i),this._defaults=s,this._name=a,this.init()}var a="ripples",r=null,s={};e.prototype.init=function(){var i=this.element;i.on("mousedown touchstart",function(n){if(!r.isTouch()||"mousedown"!==n.type){i.find(".ripple-container").length||i.append(\'<div class="ripple-container"></div>\');var e=i.children(".ripple-container"),a=r.getRelY(e,n),s=r.getRelX(e,n);if(a||s){var l=r.getRipplesColor(i),p=t("<div></div>");p.addClass("ripple").css({left:s,top:a,"background-color":l}),e.append(p),function(){return o.getComputedStyle(p[0]).opacity}(),r.rippleOn(i,p),setTimeout(function(){r.rippleEnd(p)},500),i.on("mouseup mouseleave touchend",function(){p.data("mousedown","off"),"off"===p.data("animating")&&r.rippleOut(p)})}}})},e.prototype.getNewSize=function(t,o){return Math.max(t.outerWidth(),t.outerHeight())/o.outerWidth()*2.5},e.prototype.getRelX=function(t,o){var i=t.offset();return r.isTouch()?(o=o.originalEvent,1===o.touches.length?o.touches[0].pageX-i.left:!1):o.pageX-i.left},e.prototype.getRelY=function(t,o){var i=t.offset();return r.isTouch()?(o=o.originalEvent,1===o.touches.length?o.touches[0].pageY-i.top:!1):o.pageY-i.top},e.prototype.getRipplesColor=function(t){var i=t.data("ripple-color")?t.data("ripple-color"):o.getComputedStyle(t[0]).color;return i},e.prototype.hasTransitionSupport=function(){var t=i.body||i.documentElement,o=t.style,e=o.transition!==n||o.WebkitTransition!==n||o.MozTransition!==n||o.MsTransition!==n||o.OTransition!==n;return e},e.prototype.isTouch=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},e.prototype.rippleEnd=function(t){t.data("animating","off"),"off"===t.data("mousedown")&&r.rippleOut(t)},e.prototype.rippleOut=function(t){t.off(),r.hasTransitionSupport()?t.addClass("ripple-out"):t.animate({opacity:0},100,function(){t.trigger("transitionend")}),t.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){t.remove()})},e.prototype.rippleOn=function(t,o){var i=r.getNewSize(t,o);r.hasTransitionSupport()?o.css({"-ms-transform":"scale("+i+")","-moz-transform":"scale("+i+")","-webkit-transform":"scale("+i+")",transform:"scale("+i+")"}).addClass("ripple-on").data("animating","on").data("mousedown","on"):o.animate({width:2*Math.max(t.outerWidth(),t.outerHeight()),height:2*Math.max(t.outerWidth(),t.outerHeight()),"margin-left":-1*Math.max(t.outerWidth(),t.outerHeight()),"margin-top":-1*Math.max(t.outerWidth(),t.outerHeight()),opacity:.2},500,function(){o.trigger("transitionend")})},t.fn.ripples=function(o){return this.each(function(){t.data(this,"plugin_"+a)||t.data(this,"plugin_"+a,new e(this,o))})}}(jQuery,window,document);\n'},753:function(n,e){n.exports='var keys = {};\nwindow.addEventListener("keydown",\n   function(e){\n      keys[e.keyCode] = true;\n      switch(e.keyCode){\n         case 37: case 39: case 38:  case 40: // Arrow keys\n         case 32: e.preventDefault(); break; // Space\n         default: break; // do not block other keys\n      }\n   },\n   false);\nwindow.addEventListener(\'keyup\',\n   function(e){\n      keys[e.keyCode] = false;\n   },\n   false);\n\n\n/////////////////////////////////////\n//////////// GAME SHARE\n/////////////////////////////////////\nfunction Share(share) {\n    this.version = share.version;\n    this.sheetId = share.sheetId;\n    this.descr = {};\n\n    this.updateResult = function(result) {\n        switch (this.version) {\n            case "0.0.1":\n            case "0.0.2":\n                this.getDescr(result, function(result) {\n                    var i;\n                    // console.log("Score " + result.score);\n                    // console.log("Descr " + result.descr);\n                    // console.log("Title " + result.title);\n                    window.angularComponentRef.zone.run(function() {\n                        window.angularComponentRef.updateResult(JSON.stringify(result))\n                    });\n                });\n                break;\n        }\n    }\n    this.getDescr = function(result, callback) {\n        // console.log("game Over" + JSON.stringify(result) + this.sheetId + this.version);\n        var version = this.version;\n        this.pourDescrFromSheet(result, function(result) {\n            switch (version) {\n                case "0.0.1":\n                    // setTimeout(function () {\n                    //     $(\'.recommend-btn:eq(0) > span\').text(\' Tiếp tục\');\n                    // }, 100);\n                    callback(result);\n                    break;\n                case "0.0.2":\n                    var status = result.status;\n                    var score = result.score;\n                    var level = result.level;\n                    // setTimeout(function () {\n                    //     $(\'.recommend-btn:eq(0) > span\').text(status == "won" ? \' Tiếp tục\' : \' Chơi lại\');\n                    // }, 100);\n                    // console.log("status" + status);\n                    var title = (status == "won" ? "Hoành thành" + " level " : "Dừng lại" + " ở level ") + level;\n                    if (status == "lost") score = 0;\n                    result.score = score;\n                    result.title = title;\n                    callback(result);\n                    break;\n                default:\n                    console.log("No version?");\n            }\n        });\n    }\n\n\n    this.pourDescrFromSheet = function(data, callback) {\n        var getRandomChild = this.getRandomChild;\n        var descr = this.descr;\n        //  console.log(JSON.stringify(descr));\n        //  console.log(JSON.stringify(data));\n        var randomDescr;\n        switch (this.version) {\n            case "0.0.1":\n                // console.log("DES" + _descr);\n                Object.keys(descr).forEach(function(scoreRange) {\n                    // console.log("Score" + scoreRange);\n                    var scores = scoreRange.split("-");\n                    var minScore = parseInt(scores[0]);\n                    var maxScore = parseInt(scores[1]);\n                    if (data.score >= minScore && data.score <= maxScore) {\n                        randomDescr = getRandomChild(descr[scoreRange].congratulations);\n                    }\n                });\n                data.descr = randomDescr;\n                break;\n            case "0.0.2":\n                var getRandomChild = this.getRandomChild;\n                var score;\n                // console.log("STATUS" + data.status);\n                Object.keys(descr).forEach(function(levelRange) {\n                    // console.log("Level" + levelRange);\n                    var levels = levelRange.split("-");\n                    var minLevel = parseInt(levels[0]);\n                    var maxLevel = parseInt(levels[1]);\n                    if (data.level >= minLevel && data.level <= maxLevel) {\n                        randomDescr = data.status == "won" ? getRandomChild(descr[levelRange].congratulations) : getRandomChild(descr[levelRange].encouragements);\n                        score = descr[levelRange].score;\n                    }\n                });\n                // console.log(descr + " " + score);\n                data.descr = randomDescr;\n                data.score = score;\n                break;\n            default:\n                console.log("No version?");\n        }\n        callback(data);\n    }\n\n    ////////// GET DES FROM GOOGLE SHEET\n    this.getDescrFromSheet = function() {\n        var _this = this;\n        this.getJSON("https://spreadsheets.google.com/feeds/list/" + this.sheetId + "/od6/public/values?alt=json&gid=154710158", function(data) {\n            // console.log(JSON.stringify(data));\n            switch (_this.version) {\n                case "0.0.1":\n                    var scoresDescr = {}\n                        // console.log("Descr" + JSON.stringify(data.feed.entry));\n                    data.feed.entry.forEach(function(row) {\n                        // console.log("row" + JSON.stringify(row));\n                        var scores = row.gsx$scores.$t;\n                        var congratulation = row.gsx$congratulations.$t;\n                        if (!scoresDescr[scores]) {\n                            scoresDescr[scores] = {};\n                        }\n                        if (!scoresDescr[scores].congratulations) {\n                            scoresDescr[scores].congratulations = [];\n                        }\n                        if (congratulation != "") {\n                            scoresDescr[scores].congratulations.push(congratulation);\n                        }\n                    });\n                    _this.descr = scoresDescr;\n                    // callback(scoresDescr);\n                    break;\n                case "0.0.2":\n                    var levelsDescr = {};\n                    data.feed.entry.forEach(function(row) {\n                        var congratulation = row.gsx$congratulations.$t;\n                        var encouragement = row.gsx$encouragements.$t;\n                        var score = row.gsx$scores.$t;\n                        var level = row.gsx$levels.$t;\n\n                        if (!levelsDescr[level]) {\n                            levelsDescr[level] = {};\n                        }\n                        if (!levelsDescr[level].congratulations) {\n                            levelsDescr[level].congratulations = [];\n                        }\n                        if (!levelsDescr[level].encouragements) {\n                            levelsDescr[level].encouragements = [];\n                        }\n\n                        if (congratulation != "") {\n                            levelsDescr[level].congratulations.push(congratulation);\n                        }\n                        if (encouragement != "") {\n                            levelsDescr[level].encouragements.push(encouragement);\n                        }\n                        if (score != "") {\n                            levelsDescr[level].score = score;\n                        }\n                    });\n                    _this.descr = levelsDescr;\n                    // callback(levelsDescr);\n                    break;\n                default:\n                    console.log("No share version");\n            }\n\n        });\n    }\n    this.getJSON = function(url, callback) {\n        var xhr = new XMLHttpRequest();\n        xhr.open("get", url, true);\n        xhr.responseType = "json";\n        xhr.onload = function() {\n            var status = xhr.status;\n            // console.log(JSON.stringify(xhr.response));\n            if (status == 200) {\n                callback(xhr.response);\n            } else {\n                callback(status);\n                console.error("Status " + status);\n            }\n        };\n        xhr.send();\n    };\n\n    this.getRandomChild = function(array) {\n        var r = Math.floor(Math.random() * array.length);\n        // console.log(array.length + " " + r);\n        return array[r];\n    }\n}\n\nfunction Other() {\n\n    this.startBoot = function(func) {\n        window.angularComponentRef.zone.run(function() {\n            window.angularComponentRef.startBoot(func)\n        });\n    }\n    this.startPreload = function(func) {\n        window.angularComponentRef.zone.run(function() {\n            window.angularComponentRef.startPreload(func)\n        });\n    }\n    this.preloadDone = function() {\n        window.angularComponentRef.zone.run(function() {\n            window.angularComponentRef.preloadDone()\n        });\n    }\n    this.librariesLoadDone = function() {\n        window.angularComponentRef.zone.run(function() {\n            window.angularComponentRef.librariesLoadDone()\n        });\n    }\n    this.startMenu = function(func) {\n        window.angularComponentRef.zone.run(function() {\n            window.angularComponentRef.startMenu(func)\n        });\n    }\n    this.startGame = function(func) {\n        window.angularComponentRef.zone.run(function() {\n            window.angularComponentRef.startGame(func)\n        });\n    }\n    this.startHelp = function(func) {\n        window.angularComponentRef.zone.run(function() {\n            window.angularComponentRef.startHelp(func)\n        });\n    }\n    this.startCredit = function(func) {\n        window.angularComponentRef.zone.run(function() {\n            window.angularComponentRef.startCredit(func)\n        });\n    }\n    this.resume = function(func) {\n        window.angularComponentRef.zone.run(function() {\n            window.angularComponentRef.resume(func);\n        });\n    }\n    this.pause = function(func) {\n        window.angularComponentRef.zone.run(function() {\n            window.angularComponentRef.pause(func);\n        });\n    }\n    this.continue = function(func) {\n        window.angularComponentRef.zone.run(function() {\n            window.angularComponentRef.continue(func);\n        });\n    }\n}\n\n/////////////////////////////////////\n//////////// PHASER HELPER\n/////////////////////////////////////\nfunction _Phaser(phaser) {\n    this.width = phaser.width;\n    this.height = phaser.height;\n\n    this.state = phaser.state;\n\n    this.game = {};\n    // CREATE PHASER GAME\n    this.init = function(game, callback) {\n        this.game = game;\n        var i;\n        for (i = 0; i < this.state.length; i++) {\n            this.game.state.add(this.state[i][0], this.state[i][1]);\n        }\n        callback(this.game);\n    };\n\n    this.state.startBoot = function(func) {\n        window.angularComponentRef.zone.run(function() {\n            window.angularComponentRef.startBoot(func)\n        });\n    }\n    this.state.startPreload = function(func) {\n        window.angularComponentRef.zone.run(function() {\n            window.angularComponentRef.startPreload(func)\n        });\n    }\n    this.state.preloadDone = function() {\n        window.angularComponentRef.zone.run(function() {\n            window.angularComponentRef.preloadDone()\n        });\n    }\n   this.state.librariesLoadDone = function() {\n      window.angularComponentRef.zone.run(function() {\n         window.angularComponentRef.librariesLoadDone()\n      });\n   }\n    this.state.startMenu = function(func) {\n        window.angularComponentRef.zone.run(function() {\n            window.angularComponentRef.startMenu(func)\n        });\n    }\n    this.state.startGame = function(func) {\n        window.angularComponentRef.zone.run(function() {\n            window.angularComponentRef.startGame(func)\n        });\n    }\n    this.state.startHelp = function(func) {\n        window.angularComponentRef.zone.run(function() {\n            window.angularComponentRef.startHelp(func)\n        });\n    }\n    this.state.startCredit = function(func) {\n        window.angularComponentRef.zone.run(function() {\n            window.angularComponentRef.startCredit(func)\n        });\n    }\n    this.state.resume = function(func) {\n        window.angularComponentRef.zone.run(function() {\n            window.angularComponentRef.resume(func);\n        });\n    }\n    this.state.pause = function(func) {\n        window.angularComponentRef.zone.run(function() {\n            window.angularComponentRef.pause(func);\n        });\n    }\n    this.state.continue = function(func) {\n        window.angularComponentRef.zone.run(function() {\n            window.angularComponentRef.continue(func);\n        });\n    }\n\n    this._cropCanvas = function(originCanvas, cropX, cropY, cropWidth, cropHeight) {\n        // create a temporary canvas sized to the cropped size\n        var cropCanvas = document.createElement("canvas");\n        var cropContext = cropCanvas.getContext("2d");\n        cropCanvas.width = cropWidth;\n        cropCanvas.height = cropHeight;\n        // use the extended from of drawImage to draw the\n        // cropped area to the temp canvas\n        cropContext.drawImage(originCanvas, cropX, cropY, cropWidth, cropHeight, 0, 0, cropWidth, cropHeight);\n        // return canvas\n        return cropCanvas;\n    }\n\n    this._resizeCanvas = function(originCanvas, resizeWidth, resizeHeight) {\n\n        var originHeight = originCanvas.height;\n        var originWeight = originCanvas.weight;\n        // create a temporary canvas sized to the resize size\n        var resizedCanvas = document.createElement("canvas");\n        var resizedContext = resizedCanvas.getContext("2d");\n        resizedCanvas.width = resizeWidth;\n        resizedCanvas.height = resizeHeight;\n        resizedContext.drawImage(originCanvas, 0, 0, resizedCanvas.width, resizedCanvas.height);\n\n        return resizedCanvas;\n    }\n\n    this.getScreenShotDataFrom = function(game, PIXI) {\n        var _this = this;\n        window.angularComponentRef.zone.run(function() {\n            window.angularComponentRef.getScreenShotData(function() {\n                if (game.renderer instanceof PIXI.CanvasRenderer) {\n                    var originCanvas = game.canvas;\n                    var top = Math.round(originCanvas.height / 2 - 150);\n                    var cropCanvas = _this._cropCanvas(game.canvas, 0, 0, 480, 800);\n                    var resizeCanvas = _this._resizeCanvas(cropCanvas, Math.round(480 / 800 * 300), 300);\n                    return resizeCanvas.toDataURL();\n                } else if (game.renderer instanceof PIXI.WebGLRenderer) {\n                    var gl = game.renderer.gl;\n                    var buf = new Uint8Array(game.width * game.height * 4);\n                    gl.readPixels(0, 0, game.width, game.height, gl.RGBA, gl.UNSIGNED_BYTE, buf);\n                    // console.log(buf);\n                }\n            });\n        });\n    }\n\n    // HELPING WITH SIZE ISSUE\n    this.setSize = function(_this) {\n        var height = this.height,\n            width = this.width;\n        var size = {\n                height: height,\n                width: width\n            }\n            // _this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;\n        _this.game.scale.scaleMode = 2;\n        // set setSize function\n        var _calculateSize = this.calculateSize;\n        var calculateSize = function() {\n            _calculateSize(_this, size);\n        }\n        calculateSize();\n\n        if (_this.scale.setScreenSize) _this.scale.setScreenSize(true);\n        _this.scale.setShowAll();\n        _this.scale.refresh();\n\n        if (_this.scale.setResizeCallback) {\n            _this.scale.setResizeCallback(function() {\n                calculateSize();\n            }, this);\n        } else if (_this.scale.hasResized) {\n            _this.scale.hasResized.add(function() {\n                calculateSize();\n            }, this);\n        }\n\n        if (!_this.game.device.desktop) {\n            // console.log(123);\n            var isLandscape = width > height;\n            var enterIncorrectOrientation = this.enterIncorrectOrientation;\n            var leaveIncorrectOrientation = this.leaveIncorrectOrientation;\n\n            _this.game.scale.forceOrientation(isLandscape, !isLandscape);\n            _this.game.scale.enterIncorrectOrientation.add(function() {\n                enterIncorrectOrientation(_this, calculateSize);\n            }, this);\n            _this.game.scale.leaveIncorrectOrientation.add(function() {\n                leaveIncorrectOrientation(_this, calculateSize)\n            }, this);\n        }\n    }\n    this.calculateSize = function(_this, size) {\n        var containerWidth = document.getElementById(\'iframe-game\').clientWidth - 16,\n            containerHeight = document.getElementById(\'iframe-game\').clientHeight - 16,\n            height = size.height,\n            width = size.width,\n            matchedHorizon = width / height > containerWidth / containerHeight;\n        if (matchedHorizon) {\n            _this.game.scale.minWidth = containerWidth - 3;\n            _this.game.scale.minHeight = containerWidth / width * height - 3;\n            _this.game.scale.maxWidth = containerWidth;\n            _this.game.scale.maxHeight = containerWidth / width * height;\n        } else {\n            _this.game.scale.minWidth = containerHeight / height * width - 3;\n            _this.game.scale.minHeight = containerHeight - 3;\n            _this.game.scale.maxWidth = containerHeight / height * width;\n            _this.game.scale.maxHeight = containerHeight;\n        }\n    }\n    this.leaveIncorrectOrientation = function(_this, setSize) {\n        // console.log("leaveIncorrectOrientation");\n        _this.orientated = true;\n        _this.game.paused = false;\n       document.getElementById(\'iframe-game\').contentWindow.document.getElementById("orientation").style.display = "none";\n        setSize();\n    }\n    this.enterIncorrectOrientation = function(_this, setSize) {\n       // console.log("enterIncorrectOrientation");\n        _this.orientated = false;\n        _this.game.paused = true;\n       document.getElementById(\'iframe-game\').contentWindow.document.getElementById("orientation").style.display = "block";\n        setSize();\n    }\n}\n\nfunction Game() {\n    // console.log("href " + window.location.href);\n    this.init = function(info, callback) {\n        //set absolute url\n        this.prelink = \'/sources/games/\' + window.location.href.split("game/")[1] + \'/\';\n        // this.type = game.type;\n        // this.prelink =  this.prelink ("?")[0] + \'/\';\n        if (this.prelink.indexOf("?") !== -1) {\n            this.prelink = this.prelink.split("?")[0] + \'/\';\n        }\n        // console.log(JSON.stringify( window.location.href.split("game/")))\n        // this.prelink = this.prelink.split("?")[0];\n        // console.log("prelink " + this.prelink);\n        this.game = {};\n        if (info.phaser) {\n            this._phaser = new _Phaser(info.phaser);\n        }\n\n        if (info.share) {\n            this.share = new Share(info.share);\n        } else {\n            console.error("No game share");\n        }\n        if (info.other) {\n            this.other = new Other();\n        }\n        callback();\n    }\n};\nwindow.game = new Game();'}},[1008]);